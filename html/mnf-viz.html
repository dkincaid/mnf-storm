<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
  <script src="js/highcharts.js" type="text/javascript"></script>

  <script>
  var chart; // globally available

/**
 * Request data from the server, add it to the graph and set a timeout to request again
 */
function requestData() {
    $.ajax({
        url: 'http://localhost:8082',
        success: function(point) {
            var series = chart.series[0],
                shift = series.data.length > 20; // shift if the series is longer than 20

            // add the point
            vals = JSON.parse(point)
            chart.series[0].addPoint(vals.broncos, true, shift);
            chart.series[1].addPoint(vals.saints, true, shift);
            
            // call it again after one second
            setTimeout(requestData, 1000);    
        },
        cache: false
    });
}

$(document).ready(function() {
      chart = new Highcharts.Chart({
         chart: {
            renderTo: 'container',
           defaultSeriesType: 'spline',
           events: {
              load: requestData
           }  
         },
         title: {
            text: 'Monday Night Football Tweets'
         },
         yAxis: {
            title: {
               text: 'Tweets'
            }
         },
         series: [{
            name: 'Broncos',
            data: []
         }, {
            name: 'Saints',
            data: []
         }]
      });
   });
  </script>


</head>

<body>
<div id="container" style="width: 100%; height: 400px"></div>

</body>

</html>
